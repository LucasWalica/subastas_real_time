<!-- create-auction.component.html -->
<app-navbar></app-navbar>

<header class="bg-white shadow-sm">
  <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8">
    <button 
      (click)="goBack()"
      class="flex items-center gap-2 text-gray-600 hover:text-gray-900">
      <!-- Arrow Left SVG -->
      <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
      </svg>
      Volver
    </button>
  </div>
</header>

<main class="max-w-4xl mx-auto px-4 py-8 sm:px-6 lg:px-8">
  <h1 class="mb-8 text-2xl font-bold">{{ auctionForm.value.id ? 'Editar Subasta' : 'Nueva Subasta' }}</h1>

  <form [formGroup]="auctionForm" (ngSubmit)="saveAuction()" class="bg-white rounded-lg shadow p-6 space-y-6">

    <div>
      <label class="block text-gray-700 mb-2">Título de la subasta</label>
      <input type="text" formControlName="title" class="w-full px-4 py-2 border rounded-lg">
    </div>

    <div>
      <label class="block text-gray-700 mb-2">Categoría</label>
      <select formControlName="category" class="w-full px-4 py-2 border rounded-lg">
        <option value="">Selecciona una categoría</option>
        <option *ngFor="let category of categories" [value]="category">{{ category }}</option>
      </select>
    </div>

    <div>
      <label class="block text-gray-700 mb-2">Descripción</label>
      <textarea formControlName="description" class="w-full px-4 py-2 border rounded-lg h-24"></textarea>
    </div>

    <div>
      <label class="block text-gray-700 mb-2">Tipo de subasta</label>
      <div class="flex gap-4">
        <label class="flex items-center gap-2">
          <input type="radio" formControlName="auctionType" value="live"> En vivo
        </label>
        <label class="flex items-center gap-2">
          <input type="radio" formControlName="auctionType" value="timed"> Temporizada
        </label>
      </div>
    </div>

    <div *ngIf="auctionForm.get('auctionType')?.value === 'timed'" class="grid grid-cols-2 gap-4">
      <div>
        <label class="block text-gray-700 mb-2">Fecha de inicio</label>
        <input type="datetime-local" formControlName="startDate" class="w-full px-4 py-2 border rounded-lg">
      </div>
      <div>
        <label class="block text-gray-700 mb-2">Fecha de fin</label>
        <input type="datetime-local" formControlName="endDate" class="w-full px-4 py-2 border rounded-lg">
      </div>
    </div>

    <div class="border-t pt-6">
      <div class="flex items-center justify-between mb-4">
        <h3>Items de la subasta</h3>
        <button type="button" (click)="addItem()" class="bg-blue-500 text-white px-4 py-2 rounded-lg">Agregar Item</button>
      </div>

      <div formArrayName="items" class="space-y-4">
        <div *ngFor="let item of items.controls; let i=index" [formGroupName]="i" class="border rounded-lg p-4">
          <div class="flex justify-between mb-2">
            <span>Item #{{ i + 1 }}</span>
            <button type="button" (click)="removeItem(i)" class="text-red-600">Eliminar</button>
          </div>

          <input type="text" formControlName="name" placeholder="Nombre del item" class="w-full px-3 py-2 border rounded-lg mb-2">
          <textarea formControlName="description" placeholder="Descripción" class="w-full px-3 py-2 border rounded-lg mb-2 h-20"></textarea>
          <input type="number" formControlName="startingBid" placeholder="Puja inicial" class="w-full px-3 py-2 border rounded-lg mb-2">
          <input type="file" formControlName="image" class="w-full px-3 py-2 border rounded-lg">
        </div>
      </div>
    </div>

    <div class="flex gap-4 pt-4">
      <button type="button"  class="flex-1 border border-gray-300 px-6 py-3 rounded-lg hover:bg-gray-50">Cancelar</button>
      <button type="submit" class="flex-1 bg-primary text-white px-6 py-3 rounded-lg hover:bg-hunter-green">Crear Subasta</button>
    </div>
  </form>
</main>

